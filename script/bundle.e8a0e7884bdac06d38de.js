(()=>{"use strict";var t={742:()=>{window.globalStateApp={status:"lobby",lavel:"",result:{status:"",resultTimeGame:""}}}},e={};function a(n){var s=e[n];if(void 0!==s)return s.exports;var d=e[n]={exports:{}};return t[n](d,d.exports,a),d.exports}(()=>{a(742);const t={template:()=>{const t=document.createElement("div");t.classList.add("main__inner","js-main-inner");const e=document.createElement("h1");e.classList.add("main__title","title"),e.textContent="Выбери сложность",t.appendChild(e);const a=document.createElement("form");a.classList.add("main__form","form","js-form"),a.setAttribute("action","/"),a.setAttribute("method","GET"),a.setAttribute("novalidate","novalidate"),t.appendChild(a);const n=document.createElement("div");n.classList.add("form__control"),a.appendChild(n);const s=document.createElement("input");s.classList.add("form__input","input","js-input"),s.setAttribute("type","radio"),s.setAttribute("id","lavel-one"),s.setAttribute("name","lavel"),s.setAttribute("value","easy"),s.setAttribute("required",""),n.appendChild(s);const d=document.createElement("label");d.classList.add("form__label","label","js-label"),d.setAttribute("for","lavel-one"),d.textContent="1",n.appendChild(d);const l=document.createElement("input");l.classList.add("form__input","input","js-input"),l.setAttribute("type","radio"),l.setAttribute("id","lavel-two"),l.setAttribute("name","lavel"),l.setAttribute("value","normal"),l.setAttribute("required",""),n.appendChild(l);const o=document.createElement("label");o.classList.add("form__label","label","js-label"),o.setAttribute("for","lavel-two"),o.textContent="2",n.appendChild(o);const r=document.createElement("input");r.classList.add("form__input","input","js-input"),r.setAttribute("type","radio"),r.setAttribute("id","lavel-three"),r.setAttribute("name","lavel"),r.setAttribute("value","hard"),r.setAttribute("required",""),n.appendChild(r);const i=document.createElement("label");i.classList.add("form__label","label","js-label"),i.setAttribute("for","lavel-three"),i.textContent="3",n.appendChild(i);const c=document.createElement("button");return c.classList.add("form__button","button","js-button"),c.setAttribute("type","submit"),c.setAttribute("disabled",""),c.textContent="Старт",a.appendChild(c),t},getTemplate:()=>{const e=document.querySelector(".js-main");null!=e&&(e.classList.remove("main-page"),e.innerHTML="",e.appendChild(t.template()))}},e=t,n={suits:["diamonds","hearts","clubs","spades"],names:["six","seven","eight","nine","ten","jack","queen","king","ace"]},s={easy:3,normal:6,hard:9};let d=[];const l=()=>{const t=Object.keys(s).find((t=>t===window.globalStateApp.lavel));return t?s[t]:[]},o=t=>{d=[];for(let e=d.length;e<t;e+=1){const t=Math.floor(Math.random()*n.suits.length),e=Math.floor(Math.random()*n.names.length),a=n.suits[t],s=n.names[e];d.push({suit:a,name:s})}return d=d.reduce(((t,e)=>(t.find((t=>t.name===e.name&&t.suit===e.suit))||t.push(e),t)),[]),d.length<t&&o(t),d},r=(i=l,c=o,m=t=>{const e=t,a=e.concat(e);return a.sort((()=>Math.random()-.5)),a},()=>m(c(i())));var i,c,m;const u={easy:"easy",normal:"normal",hard:"hard"},p={win:"modalWin",lose:"modalLose"},b=()=>{const t=Object.keys(u).find((t=>t===window.globalStateApp.lavel));return t?u[t]:[]},C={templateCard:t=>{const{suit:e,name:a}=t;return`\n        <div class="card-wrapper">\n        <div class="card js-card" data-card="${e}-${a}">\n         <div class="card-front">\n           <img class="card__img" src="./images/bg_card_real.png" alt="">\n         </div>\n        <div class="card-back">\n          <img class="card__img" src="./images/${e}-${a}.png" alt="">\n        </div>\n       </div>\n      </div>`},renderCard:(t,e)=>{t.innerHTML="",e().forEach((e=>{t.innerHTML+=C.templateCard(e)}))},onFlipCards:t=>{t.forEach((t=>{t.classList.add("flip")}))},offFlipCards:t=>{t.forEach((t=>{t.classList.remove("flip")}))}},h=C,v={onTimerRev:(t,e=5)=>{t.innerHTML=`0${e}`;const a=setInterval((()=>{e-=1,t.innerHTML=`0${e}`,e<=0&&(clearInterval(a),window.globalStateApp.status="game")}),1e3)},onStopwatch(t,e){let a=0;const n=setInterval((()=>{if("end"===window.globalStateApp.status)return void clearInterval(n);a+=1;const s=Math.floor(a)-60*Math.floor(a/60),d=Math.floor(a/60);e.textContent=s<10?`0${s}`:`${s}`,t.textContent=d<10?`0${d}`:`${d}`}),1e3)}},_={modalWin:t=>{const e=document.createElement("div");e.classList.add("modal","js-modal");const a=document.createElement("div");a.classList.add("modal__inner"),e.appendChild(a);const n=document.createElement("img");n.classList.add("modal__img"),n.setAttribute("src","./images/modal__win.png"),n.setAttribute("alt",""),a.appendChild(n);const s=document.createElement("div");s.classList.add("modal__content"),a.appendChild(s);const d=document.createElement("h1");d.classList.add("modal__title","title"),d.textContent="Вы выиграли!",s.appendChild(d);const l=document.createElement("p");l.classList.add("modal__text","js-text-result"),l.textContent="Затраченное время:",s.appendChild(l);const o=document.createElement("br");l.appendChild(o);const r=document.createElement("span");r.classList.add("modal__time","js-time-result"),r.textContent=`${t}`,l.append(r);const i=document.createElement("button");return i.classList.add("button","js-button"),i.textContent="Начать заново",s.appendChild(i),e},modalLose:t=>{const e=document.createElement("div");e.classList.add("modal","js-modal");const a=document.createElement("div");a.classList.add("modal__inner"),e.appendChild(a);const n=document.createElement("img");n.classList.add("modal__img"),n.setAttribute("src","./images/modal__lose.png"),n.setAttribute("alt",""),a.appendChild(n);const s=document.createElement("div");s.classList.add("modal__content"),a.appendChild(s);const d=document.createElement("h1");d.classList.add("modal__title","title"),d.textContent="Вы проиграли!",s.appendChild(d);const l=document.createElement("p");l.classList.add("modal__text","js-text-result"),l.textContent="Затраченное время:",s.appendChild(l);const o=document.createElement("br");l.appendChild(o);const r=document.createElement("span");r.classList.add("modal__time","js-time-result"),r.textContent=`${t}`,l.append(r);const i=document.createElement("button");return i.classList.add("button","js-button"),i.textContent="Начать заново",s.appendChild(i),e},renderModal:(t,e)=>{const a=document.querySelector(".js-body"),n="modalWin"===t?_.modalWin(e):_.modalLose(e);a.appendChild(n)}},L=_,f={returnIndexPage:()=>{const t=document.querySelector(".js-body"),a=document.querySelector(".js-modal");a.querySelector(".js-button").addEventListener("click",(()=>{t.removeChild(a),window.globalStateApp.status="lobby",e.getTemplate(),M.lobbyForm()}))}},g=f,A=()=>{document.querySelector(".js-body").classList.add("no-scroll");const t=document.querySelector(".js-time");window.globalStateApp.result.resultTimeGame=t.textContent;const{resultTimeGame:e,status:a}=window.globalStateApp.result;"win"!==a&&"lose"!==a||(L.renderModal((()=>{const t=Object.keys(p).find((t=>t===window.globalStateApp.result.status));return t?p[t]:[]})(),e),g.returnIndexPage())},E={hasFlipCard:!1,firstCard:null,secondCard:null,count:0,onFlipCard:t=>{const e=t.target.closest(".js-card");if(null!==e&&e.classList.contains("js-card")){if(e.classList.add("flip"),!E.hasFlipCard)return E.hasFlipCard=!0,void(E.firstCard=e);E.secondCard=e,E.hasFlipCard=!1,E.checkMatchCard(E.firstCard,E.secondCard)}},checkMatchCard:(t,e)=>{if(null!==t&&null!==e)return t.dataset.card===e.dataset.card?(E.count+=1,void(E.count===l()&&(window.globalStateApp.status="end",window.globalStateApp.result.status="win",E.count=0,A()))):void E.offFlipCard()},offFlipCard:()=>{setTimeout((()=>{window.globalStateApp.status="end",window.globalStateApp.result.status="lose",E.count=0,A()}),500)}},w=E,j=()=>{const t=document.querySelector(".js-min"),e=document.querySelector(".js-sec"),a=Array.from(document.querySelectorAll(".js-card")),n=document.querySelector(".js-field"),s=document.querySelector(".js-button");"ready"===window.globalStateApp.status&&(v.onTimerRev(e),h.onFlipCards(a));const d=setInterval((()=>{"game"===window.globalStateApp.status&&(v.onStopwatch(t,e),h.offFlipCards(a),s.removeAttribute("disabled"),n.addEventListener("click",w.onFlipCard),clearInterval(d))}),1e3),l=setInterval((()=>{"end"===window.globalStateApp.status&&(null==n||n.removeEventListener("click",w.onFlipCard),clearInterval(l))}),1e3)},y=()=>{x.getTemplate(r,b),window.globalStateApp.status="ready",j()},S={template:(t,e)=>{document.querySelector(".js-main").classList.add("main-page");const a=document.querySelector(".js-main-inner");a.innerHTML="",a.classList.add("main__inner","main__inner-game-page"),(t=>{const e=document.createElement("div");e.classList.add("main__control","control"),t.appendChild(e);const a=document.createElement("div");a.classList.add("timer"),e.appendChild(a);const n=document.createElement("div");n.classList.add("timer__text"),a.appendChild(n);const s=document.createElement("p"),d=document.createElement("p");s.classList.add("text"),d.classList.add("text"),s.textContent="min",d.textContent="sec",n.appendChild(s),n.appendChild(d);const l=document.createElement("div");l.classList.add("timer__time","time"),a.appendChild(l);const o=document.createElement("p");o.classList.add("js-time"),l.append(o);const r=document.createElement("span");r.classList.add("js-min"),r.textContent="00",o.append(r),o.append(".");const i=document.createElement("span");i.classList.add("js-sec"),i.textContent="00",o.append(i);const c=document.createElement("button");c.classList.add("button","js-button"),c.setAttribute("disabled","disabled"),c.textContent="Начать заново",c.addEventListener("click",y),e.appendChild(c)})(a);const n=document.createElement("div");n.classList.add("main__field","field",`${e()}`,"js-field"),a.appendChild(n),h.renderCard(n,t)},getTemplate:(t,e)=>{S.template(t,e)}},x=S,q=t=>{t.addEventListener("submit",(t=>{t.preventDefault();const e=t.target,{elements:a}=e;e.checkValidity&&(Array.from(a).filter((t=>t.name)).forEach((t=>{t.checked&&(window.globalStateApp.lavel=t.value,window.globalStateApp.status="ready")})),x.getTemplate(r,b),j())}))},M={lobbyForm:()=>{const t=document.querySelector(".js-form");t.addEventListener("click",(t=>{const e=t.target,a=e.closest(".js-label"),n=document.querySelectorAll(".js-label"),s=document.querySelector(".js-button");e.classList.contains("js-label")&&(n.forEach((t=>{t.classList.remove("active")})),a.classList.add("active"),s.removeAttribute("disabled"))})),q(t)}};window.addEventListener("DOMContentLoaded",(()=>{window.globalStateApp.status="lobby",e.getTemplate(),M.lobbyForm()}))})()})();